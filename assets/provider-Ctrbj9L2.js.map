{"version":3,"file":"provider-Ctrbj9L2.js","sources":["../../../node_modules/react-error-boundary/dist/react-error-boundary.esm.js","../../../src/layout/provider.tsx"],"sourcesContent":["'use client';\nimport { createContext, Component, createElement, useContext, useState, useMemo, forwardRef } from 'react';\n\nconst ErrorBoundaryContext = createContext(null);\n\nconst initialState = {\n  didCatch: false,\n  error: null\n};\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.resetErrorBoundary = this.resetErrorBoundary.bind(this);\n    this.state = initialState;\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      didCatch: true,\n      error\n    };\n  }\n  resetErrorBoundary() {\n    const {\n      error\n    } = this.state;\n    if (error !== null) {\n      var _this$props$onReset, _this$props;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_this$props$onReset = (_this$props = this.props).onReset) === null || _this$props$onReset === void 0 ? void 0 : _this$props$onReset.call(_this$props, {\n        args,\n        reason: \"imperative-api\"\n      });\n      this.setState(initialState);\n    }\n  }\n  componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n    (_this$props$onError = (_this$props2 = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      didCatch\n    } = this.state;\n    const {\n      resetKeys\n    } = this.props;\n\n    // There's an edge case where if the thing that triggered the error happens to *also* be in the resetKeys array,\n    // we'd end up resetting the error boundary immediately.\n    // This would likely trigger a second error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call of cDU after the error is set.\n\n    if (didCatch && prevState.error !== null && hasArrayChanged(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onReset2, _this$props3;\n      (_this$props$onReset2 = (_this$props3 = this.props).onReset) === null || _this$props$onReset2 === void 0 ? void 0 : _this$props$onReset2.call(_this$props3, {\n        next: resetKeys,\n        prev: prevProps.resetKeys,\n        reason: \"keys\"\n      });\n      this.setState(initialState);\n    }\n  }\n  render() {\n    const {\n      children,\n      fallbackRender,\n      FallbackComponent,\n      fallback\n    } = this.props;\n    const {\n      didCatch,\n      error\n    } = this.state;\n    let childToRender = children;\n    if (didCatch) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n      if (typeof fallbackRender === \"function\") {\n        childToRender = fallbackRender(props);\n      } else if (FallbackComponent) {\n        childToRender = createElement(FallbackComponent, props);\n      } else if (fallback !== undefined) {\n        childToRender = fallback;\n      } else {\n        throw error;\n      }\n    }\n    return createElement(ErrorBoundaryContext.Provider, {\n      value: {\n        didCatch,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      }\n    }, childToRender);\n  }\n}\nfunction hasArrayChanged() {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]));\n}\n\nfunction assertErrorBoundaryContext(value) {\n  if (value == null || typeof value.didCatch !== \"boolean\" || typeof value.resetErrorBoundary !== \"function\") {\n    throw new Error(\"ErrorBoundaryContext not found\");\n  }\n}\n\nfunction useErrorBoundary() {\n  const context = useContext(ErrorBoundaryContext);\n  assertErrorBoundaryContext(context);\n  const [state, setState] = useState({\n    error: null,\n    hasError: false\n  });\n  const memoized = useMemo(() => ({\n    resetBoundary: () => {\n      context.resetErrorBoundary();\n      setState({\n        error: null,\n        hasError: false\n      });\n    },\n    showBoundary: error => setState({\n      error,\n      hasError: true\n    })\n  }), [context.resetErrorBoundary]);\n  if (state.hasError) {\n    throw state.error;\n  }\n  return memoized;\n}\n\nfunction withErrorBoundary(component, errorBoundaryProps) {\n  const Wrapped = forwardRef((props, ref) => createElement(ErrorBoundary, errorBoundaryProps, createElement(component, {\n    ...props,\n    ref\n  })));\n\n  // Format for display in DevTools\n  const name = component.displayName || component.name || \"Unknown\";\n  Wrapped.displayName = \"withErrorBoundary(\".concat(name, \")\");\n  return Wrapped;\n}\n\nexport { ErrorBoundary, ErrorBoundaryContext, useErrorBoundary, withErrorBoundary };\n","import * as React from \"react\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { IconTheme } from \"../components/icons/IconTheme\";\n\ntype AppProviderProps = {\n  children: React.ReactNode;\n};\n\nconst MainErrorFallback = () => <div>Error</div>;\nexport type AppContextType = {\n  iconTheme: [IconTheme, React.Dispatch<React.SetStateAction<IconTheme>>];\n  toggleTheme: () => void;\n};\n\nexport const AppContext = React.createContext<AppContextType | null>(null);\n\n// Hook to use the context\nexport function useAppContext() {\n  const context = React.useContext(AppContext);\n  if (!context) {\n    throw new Error(\n      \"EditContact subcomponents must be used within EditContact.Root\",\n    );\n  }\n  return context;\n}\n\nexport const AppProvider = ({ children }: AppProviderProps) => {\n  const [iconTheme, setIconTheme] = React.useState(IconTheme.antd);\n  const [theme, setTheme] = React.useState(\"light\");\n\n  React.useEffect(() => {\n    const htmlElement = document.querySelector(\"html\");\n    if (htmlElement) {\n      htmlElement.setAttribute(\"data-theme\", theme);\n    }\n  }, [theme]);\n\n  const app: AppContextType = {\n    iconTheme: [iconTheme, setIconTheme],\n\n    toggleTheme: () => {\n      console.log(\"toggleTheme\", theme, theme === \"dark\");\n      setTheme(theme === \"dark\" ? \"light\" : \"dark\");\n    },\n  };\n\n  return (\n    <React.Suspense\n      fallback={\n        <div className=\"flex h-screen w-screen items-center justify-center\">\n          Spinner\n        </div>\n      }\n    >\n      <ErrorBoundary FallbackComponent={MainErrorFallback}>\n        <AppContext.Provider value={app}>{children}</AppContext.Provider>\n      </ErrorBoundary>\n    </React.Suspense>\n  );\n};\n"],"names":["ErrorBoundaryContext","createContext","initialState","ErrorBoundary","Component","props","error","_this$props$onReset","_this$props","_len","args","_key","info","_this$props$onError","_this$props2","prevProps","prevState","didCatch","resetKeys","hasArrayChanged","_this$props$onReset2","_this$props3","children","fallbackRender","FallbackComponent","fallback","childToRender","createElement","a","b","item","index","MainErrorFallback","jsx","AppContext","React.createContext","useAppContext","context","React.useContext","AppProvider","iconTheme","setIconTheme","React.useState","IconTheme","theme","setTheme","React.useEffect","htmlElement","app","React.Suspense"],"mappings":"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","x_google_ignoreList":[0]}